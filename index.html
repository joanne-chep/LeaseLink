<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LeaseLink - Find Your Perfect Home</title>
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/properties.css">
    <link rel="stylesheet" href="css/utils.css">
    <script src="js/authGuard.js"></script>
    <script src="js/logout.js"></script>
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="logo">LeaseLink</div>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="properties.html">Properties</a></li>
                <li><a href="login.html" id="navAuthLink">Login</a></li>
            </ul>
        </nav>
    </header>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const navAuthLink = document.getElementById('navAuthLink');
        const navLinksUl = navAuthLink ? navAuthLink.parentNode.parentNode : null;
        const loginListItem = navAuthLink ? navAuthLink.parentNode : null;

        if (!navAuthLink || !navLinksUl || !loginListItem) {
            return;
        }

        fetch('backend/get_session_info.php')
            .then(response => response.json())
            .then(data => {
                const { userName, userType, isLoggedIn } = data;

                if (isLoggedIn) {
                
                    const dashboardLink = document.createElement('a');
                    dashboardLink.textContent = `Welcome, ${userName}`;
                    let dashboardUrl = 'index.html';
                    if (userType === 'client') {
                        dashboardUrl = 'client-dashboard.html';
                    } else if (userType === 'landlord') {
                        dashboardUrl = 'landlord-dashboard.html';
                    } else if (userType === 'admin') {
                        dashboardUrl = 'admin-dashboard.html';
                    }
                    dashboardLink.href = dashboardUrl;
                    const dashboardListItem = document.createElement('li');
                    dashboardListItem.appendChild(dashboardLink);

            
                    const logoutLink = document.createElement('a');
                    logoutLink.href = '#';
                    logoutLink.textContent = 'Logout';
                    logoutLink.onclick = (e) => {
                        e.preventDefault();
                        performLogout();
                    };
                    const logoutListItem = document.createElement('li');
                    logoutListItem.appendChild(logoutLink);

                    
                    navLinksUl.replaceChild(dashboardListItem, loginListItem);
                    navLinksUl.appendChild(logoutListItem);

                    
                    if (userType === 'landlord' || userType === 'admin') {
                        const navLinks = navLinksUl.querySelectorAll('a');
                        navLinks.forEach(link => {
                            if (link.getAttribute('href') === 'index.html' || link.getAttribute('href') === 'properties.html') {
                            
                                if (link.parentElement.tagName === 'LI') {
                                    link.parentElement.style.display = 'none';
                                }
                            }
                        });
                    }

                    
                    if (document.getElementById('welcomeMessage')) {
                        document.getElementById('welcomeMessage').textContent = `Welcome, ${userName}!`;
                    }
                
                }
            })
            .catch(error => {
                console.error('Error updating navigation:', error);
            });
        });
    </script>

    <main>
        <section class="hero">
            <h1>Find Your Perfect Home</h1>
            <p>Connecting landlords and tenants with ease</p>
            <a href="properties.html" class="btn">Browse Properties</a>
        </section>

        <section class="about-us">
            <h2>About Us</h2>
            <div class="about-content">
                <div class="about-text">
                    <p>At LeaseLink, we believe finding a home or a tenant should be a joyful journey, not a stressful one. We've created a friendly space where landlords can easily connect with wonderful people looking for a place to call home, and where tenants can discover properties that truly feel right, without the usual hassle.</p>
                    <p>We're more than just a listing site; we're a community built on trust and clear conversations. We're here to make sure every step, from browsing to moving in, feels straightforward and supportive. Because for us, it's not just about properties, it's about helping you find your happy place and building connections that last.</p>
                </div>
                <div class="about-image">
                    <img src="assets/aboutus.webp" alt="About Us Image">
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <p>&copy; 2025 LeaseLink. All rights reserved.</p>
    </footer>
</body>
</html>
