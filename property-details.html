<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LeaseLink - Property Details</title>
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/properties.css">
    <link rel="stylesheet" href="css/utils.css">
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="logo">LeaseLink</div>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="properties.html">Properties</a></li>
                <li><a href="login.html">Login</a></li>
            </ul>
        </nav>
    </header>

    <div class="container">
        <div class="property-details">
            <div class="property-image">Property Image</div>
            <div class="property-content">
                <h1 class="property-title" id="propertyTitle">Loading...</h1>
                <div class="property-location" id="propertyLocation">Loading...</div>
                <div class="property-price" id="propertyPrice">Loading...</div>
                <div class="property-description" id="propertyDescription">Loading...</div>
                
                <a href="#" class="btn" onclick="bookViewing()">Book Viewing</a>
                <a href="properties.html" class="btn btn-secondary">Back to Properties</a>
      </div>
    </div>
  </div>

    <footer class="footer">
        <p>&copy; 2025 LeaseLink. All rights reserved.</p>
    </footer>

<script>
        // Load property details dynamically from the backend
        function loadProperty() {
            const urlParams = new URLSearchParams(window.location.search);
            const id = urlParams.get('id');

            if (!id) {
                document.getElementById('propertyTitle').textContent = 'Error';
                document.getElementById('propertyLocation').textContent = '';
                document.getElementById('propertyPrice').textContent = '';
                document.getElementById('propertyDescription').textContent = 'No property ID provided.';
                return;
            }

            fetch(`backend/get_property.php?id=${id}`)
                .then(response => response.json())
                .then(property => {
                    if (property.error) {
                        document.getElementById('propertyTitle').textContent = 'Error';
                        document.getElementById('propertyLocation').textContent = '';
                        document.getElementById('propertyPrice').textContent = '';
                        document.getElementById('propertyDescription').textContent = property.error;
                    } else {
                        document.getElementById('propertyTitle').textContent = property.title;
                        document.getElementById('propertyLocation').textContent = property.location;
                        document.getElementById('propertyPrice').textContent = property.price;
                        document.getElementById('propertyDescription').textContent = property.description;
                        // document.querySelector('.property-image').src = property.image_url;
                    }
                })
                .catch(error => {
                    document.getElementById('propertyTitle').textContent = 'Error';
                    document.getElementById('propertyLocation').textContent = '';
                    document.getElementById('propertyPrice').textContent = '';
                    document.getElementById('propertyDescription').textContent = 'Failed to load property details.';
                    console.error('Error:', error);
                });
        }

        function bookViewing() {
            alert('Booking feature will be implemented soon! Please contact us directly for now.');
        }

        // Load property when page loads
        loadProperty();
</script>
</body>
</html>
